<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–æ–∏ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω—ã–µ –≤–∏–∑–∏—Ç—ã</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .visit-card {
            transition: transform 0.2s;
        }
        .visit-card:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="bg-light">
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>üè• –ú–æ–∏ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω—ã–µ –≤–∏–∑–∏—Ç—ã</h1>
        <div>
            <a href="/" class="btn btn-outline-primary me-2">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        </div>
    </div>

    <div th:if="${hasOwner}" class="row mb-4">
        <div class="col-md-4">
            <div class="card text-center bg-primary text-white">
                <div class="card-body">
                    <h3 th:text="${visits.size()}">0</h3>
                    <p class="mb-0">–í—Å–µ–≥–æ –≤–∏–∑–∏—Ç–æ–≤</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center bg-success text-white">
                <div class="card-body">
                    <h3 th:text="${visitsThisYear}">0</h3>
                    <p class="mb-0">–í–∏–∑–∏—Ç–æ–≤ –≤ —ç—Ç–æ–º –≥–æ–¥—É</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center bg-warning text-white">
                <div class="card-body">
                    <h3 th:text="${totalCost != null ? totalCost + ' ‚ÇΩ' : '0 ‚ÇΩ'}">0 ‚ÇΩ</h3>
                    <p class="mb-0">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</p>
                </div>
            </div>
        </div>
    </div>

    <div th:if="${hasOwner}">
        <div th:if="${visits != null and !visits.empty}">
            <div class="row">
                <div th:each="visit : ${visits}" class="col-md-6 mb-3">
                    <div class="card visit-card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="mb-0">
                                <span th:text="${visit.cat.name}">–ö–æ—à–∫–∞</span> -
                                <span th:text="${#temporals.format(visit.visitDate, 'dd.MM.yyyy')}">01.01.2025</span>
                            </h6>
                            <span class="badge bg-primary" th:text="${visit.cost != null ? visit.cost + ' ‚ÇΩ' : '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ'}">
                                2500 ‚ÇΩ
                            </span>
                        </div>
                        <div class="card-body">
                            <div class="mb-2">
                                <strong>–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä:</strong>
                                <span th:text="${visit.vet.name}">–î–æ–∫—Ç–æ—Ä –ò–≤–∞–Ω–æ–≤</span>
                                <small class="text-muted" th:if="${visit.vet.specialty}">
                                    (<span th:text="${visit.vet.specialty}">—Ö–∏—Ä—É—Ä–≥</span>)
                                </small>
                            </div>
                            <div class="mb-2">
                                <strong>–ö–ª–∏–Ω–∏–∫–∞:</strong>
                                <span th:text="${visit.vet.clinicName}">–í–µ—Ç–ö–ª–∏–Ω–∏–∫–∞</span>
                            </div>
                            <div class="mb-2" th:if="${visit.vet.phone}">
                                <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong>
                                <span th:text="${visit.vet.phone}">+79991234567</span>
                            </div>
                            <div class="mb-2" th:if="${visit.diagnosis}">
                                <strong>–î–∏–∞–≥–Ω–æ–∑:</strong>
                                <span th:text="${visit.diagnosis}">–ü—Ä–æ—Å—Ç—É–¥–∞</span>
                            </div>
                            <div class="mb-2" th:if="${visit.treatment}">
                                <strong>–õ–µ—á–µ–Ω–∏–µ:</strong>
                                <span th:text="${visit.treatment}">–ê–Ω—Ç–∏–±–∏–æ—Ç–∏–∫–∏</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div th:if="${visits == null or visits.empty}" class="text-center py-5">
            <div class="card">
                <div class="card-body py-5">
                    <h4 class="text-muted">üìã –ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π –æ –≤–∏–∑–∏—Ç–∞—Ö</h4>
                    <p class="text-muted">–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤—Å–µ –≤–∞—à–∏ –≤–∏–∑–∏—Ç—ã –∫ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä—É</p>
                </div>
            </div>
        </div>
    </div>

    <div th:unless="${hasOwner}" class="text-center py-5">
        <div class="card">
            <div class="card-body py-5">
                <h4 class="text-muted">–¢–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∫–æ—à–µ–∫</h4>
                <p class="text-muted">–£ –≤–∞—Å –Ω–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ—à–µ–∫, –ø–æ—ç—Ç–æ–º—É –∑–¥–µ—Å—å –Ω–µ—á–µ–≥–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å</p>
                <a th:href="@{/user/cat/add}" class="btn btn-primary mt-2">–î–æ–±–∞–≤–∏—Ç—å –∫–æ—à–∫—É</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>