<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <div th:if="${success}" class="alert alert-success alert-dismissible fade show">
        <span th:text="${success}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <div th:if="${error}" class="alert alert-danger alert-dismissible fade show">
        <span th:text="${error}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>üê± –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h1>
        <div>
            <a th:href="@{/}" class="btn btn-outline-primary me-2">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            <a th:href="@{/user/cat/add}" class="btn btn-outline-primary me-2">–î–æ–±–∞–≤–∏—Ç—å –º–æ—é –∫–æ—à–∫—É</a>
            <div th:if="${hasOwner}" class="mt-3">
                <a th:href="@{/user/profile/edit}" class="btn btn-outline-primary btn-sm">
                    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
                </a>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">üë§ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h5>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <th width="40%">Email:</th>
                            <td th:text="${email}">user@example.com</td>
                        </tr>
                        <tr>
                            <th>–†–æ–ª–∏:</th>
                            <td>
                                <span th:each="role : ${roles}"
                                      class="badge me-1"
                                      th:classappend="${role == 'ADMIN' ? 'bg-danger' :
                                                     role == 'MANAGER' ? 'bg-warning' : 'bg-primary'}">
                                    <span th:text="${role}">USER</span>
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <th>&nbsp;</th>
                            <td>&nbsp;</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header" th:classappend="${hasOwner} ? 'bg-success text-white' : 'bg-secondary text-white'">
                    <h5 class="mb-0" th:text="${hasOwner} ? 'üë®‚Äçüíº –î–∞–Ω–Ω—ã–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞' : '‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'">
                        –î–∞–Ω–Ω—ã–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞
                    </h5>
                </div>
                <div class="card-body">
                    <div th:if="${hasOwner}">
                        <table class="table table-borderless">
                            <tr th:if="${owner != null}">
                                <th width="40%">–§–ò–û:</th>
                                <td th:text="${owner.fullName}">–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á</td>
                            </tr>
                            <tr th:if="${owner != null and owner.phone != null}">
                                <th>–¢–µ–ª–µ—Ñ–æ–Ω:</th>
                                <td th:text="${owner.phone}">+79991234567</td>
                            </tr>
                            <tr th:if="${owner != null and owner.address != null}">
                                <th>–ê–¥—Ä–µ—Å:</th>
                                <td th:text="${owner.address}">–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1</td>
                            </tr>
                        </table>
                    </div>
                    <div th:unless="${hasOwner}" class="text-center">
                        <div th:if="${roles.contains('ADMIN')}">
                            <h4>üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã</h4>
                            <p class="text-muted">–í—ã –∏–º–µ–µ—Ç–µ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º —Å–∏—Å—Ç–µ–º—ã</p>
                            <a th:href="@{/admin/dashboard}" class="btn btn-danger mt-2">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</a>
                        </div>
                        <div th:if="${roles.contains('MANAGER') and !roles.contains('ADMIN')}">
                            <h4>üëî –ú–µ–Ω–µ–¥–∂–µ—Ä</h4>
                            <p class="text-muted">–í—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º—ã</p>
                            <a th:href="@{/manager/dashboard}" class="btn btn-warning mt-2">–ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:if="${hasOwner}" class="card">
        <div class="card-header bg-info text-white">
            <h5 class="mb-0">üêæ –ú–æ–∏ –∫–æ—à–∫–∏</h5>
        </div>
        <div class="card-body">
            <div th:if="${cats != null and !cats.empty}">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>–ò–º—è</th>
                                <th>–í–æ–∑—Ä–∞—Å—Ç</th>
                                <th>–ü–æ—Ä–æ–¥–∞</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="cat : ${cats}">
                                <td th:text="${cat.name}"></td>
                                <td>
                                    <span th:text="${cat.age}">3</span> –ª–µ—Ç
                                </td>
                                <td>
                                    <span th:if="${cat.breed != null}" th:text="${cat.breed}"></span>
                                    <span th:if="${cat.breed == null}" class="text-muted">–ù–µ —É–∫–∞–∑–∞–Ω–∞</span>
                                </td>
                                <td class="text">
                                    <a th:href="@{/user/cat/edit/{id}(id=${cat.id})}"
                                       class="btn btn-sm btn-primary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

<!--                <div class="row mt-4">-->
<!--                    <div class="col-md-4">-->
<!--                        <div class="card text-center">-->
<!--                            <div class="card-body">-->
<!--                                <h3 th:text="${cats != null ? cats.size() : 0}">0</h3>-->
<!--                                <p class="text-muted">–í—Å–µ–≥–æ –∫–æ—à–µ–∫</p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="col-md-4">-->
<!--                        <div class="card text-center">-->
<!--                            <div class="card-body">-->
<!--                                <h3 th:text="${cats != null ? cats.?[age < 3].size() : 0}">0</h3>-->
<!--                                <p class="text-muted">–ö–æ—Ç—è—Ç–∞ (< 3 –ª–µ—Ç)</p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="col-md-4">-->
<!--                        <div class="card text-center">-->
<!--                            <div class="card-body">-->
<!--                                <h3 th:text="${cats != null ? cats.?[age >= 7].size() : 0}">0</h3>-->
<!--                                <p class="text-muted">–í–∑—Ä–æ—Å–ª—ã–µ (‚â• 7 –ª–µ—Ç)</p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
            </div>
            <div th:if="${cats == null or cats.empty}" class="text-center text-muted py-4">
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ—à–µ–∫</p>
            </div>
        </div>
    </div>

    <div th:unless="${hasOwner}" class="card">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0">üìä –°–∏—Å—Ç–µ–º–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h5>
        </div>
        <div class="card-body">
            <div class="row text-center">
                <div class="col-md-3" th:if="${roles.contains('ADMIN')}">
                    <div class="card">
                        <div class="card-body">
                            <h3>üë•</h3>
                            <p class="text-muted">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</p>
                            <a th:href="@{/admin/users}" class="btn btn-outline-primary btn-sm">–ü–µ—Ä–µ–π—Ç–∏</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body">
                            <h3>üê±</h3>
                            <p class="text-muted">–í—Å–µ –∫–æ—à–∫–∏ —Å–∏—Å—Ç–µ–º—ã</p>
                            <a th:href="@{/cats}" class="btn btn-outline-info btn-sm">–ü–µ—Ä–µ–π—Ç–∏</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body">
                            <h3>üë®‚Äçüíº</h3>
                            <p class="text-muted">–í—Å–µ –≤–ª–∞–¥–µ–ª—å—Ü—ã</p>
                            <a th:href="@{/owners}" class="btn btn-outline-success btn-sm">–ü–µ—Ä–µ–π—Ç–∏</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body">
                            <h3>üè•</h3>
                            <p class="text-muted">–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω—ã–µ –≤–∏–∑–∏—Ç—ã</p>
                            <a th:href="@{/visits}" class="btn btn-outline-warning btn-sm">–ü–µ—Ä–µ–π—Ç–∏</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>